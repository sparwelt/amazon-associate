// Generated by CoffeeScript 2.3.1
var EventEmitter, zlib;

({EventEmitter} = require('events'));

zlib = require('zlib');

// decorate a response to unzip data on the fly
module.exports = class extends EventEmitter {
  constructor(res) {
    var gunzip;
    super();
    this.statusCode = res.statusCode;
    this.httpVersion = res.httpVersion;
    this.headers = res.headers;
    this.trailers = res.trailers;
    gunzip = zlib.createUnzip();
    res.on('data', function(data) {
      return gunzip.write(data);
    });
    res.on('end', function() {
      return gunzip.end();
    });
    res.on('close', (err) => {
      return this.emit('close', err);
    });
    gunzip.on('data', (data) => {
      return this.emit('data', data.toString());
    });
    gunzip.on('error', (err) => {
      return this.emit('close', err);
    });
    gunzip.on('end', () => {
      return this.emit('end');
    });
    this.res = res;
  }

  setEncoding(encoding) {
    return this.res.setEncoding(encoding);
  }

  pause() {
    return this.res.pause();
  }

  resume() {
    return this.res.resume();
  }

};
